# 互联网广告平台系统说明文档

## 1. 系统概述

这是一个基于Python Flask框架开发的互联网广告平台，提供广告投放、管理、统计等完整的功能链。系统采用前后端分离架构，后端使用Flask提供RESTful API，前端使用Bootstrap构建响应式界面。

## 2. 系统架构

### 2.1 技术栈

- 后端框架：Python Flask
- 数据库：MySQL
- ORM：SQLAlchemy
- 前端框架：Bootstrap
- 认证系统：Flask-Login

### 2.2 项目结构

```
ad_platform/
├── app/
│   ├── models/         # 数据模型
│   ├── routes/         # 路由控制
│   ├── templates/      # 前端模板
│   └── __init__.py     # 应用初始化
├── config.py           # 配置文件
├── requirements.txt    # 依赖项
└── run.py             # 启动文件
```

## 3. 核心功能模块

### 3.1 用户系统

#### 模型设计 (User)

- 基础信息：用户名、邮箱、密码、公司名称、电话
- 账户信息：余额
- 角色划分：普通用户/管理员
- 关联数据：广告、支付记录、发票

### 3.2 广告系统

#### 模型设计 (Advertisement)

- 基本信息：标题、描述、类型、内容URL、目标URL
- 投放信息：开始日期、结束日期、预算
- 状态管理：待审核、已批准、已拒绝、活跃、暂停、完成
- 统计数据：展示次数、点击次数、支出

#### 广告类型

- banner：横幅广告
- popup：弹窗广告
- video：视频广告
- native：原生广告

#### 数据追踪

- AdImpression：记录广告展示
- AdClick：记录广告点击

### 3.3 支付系统

#### 模型设计 (Payment)

- 交易信息：金额、支付方式、交易号
- 状态管理：待支付、成功、失败
- 支付方式：支付宝、微信、银行转账

### 3.4 发票系统

#### 模型设计 (Invoice)

- 发票信息：发票号码、金额、类型
- 开票信息：税号、公司名称、地址、电话
- 状态管理：待处理、已开具、已取消

## 4. 业务流程

### 4.1 广告投放流程

1. 用户注册/登录
2. 创建广告：填写广告信息
3. 提交审核：等待管理员审核
4. 审核通过：广告进入活跃状态
5. 开始投放：系统开始记录展示和点击

### 4.2 充值流程

1. 用户发起充值：选择金额和支付方式
2. 生成订单：系统创建支付记录
3. 支付确认：更新用户余额
4. 发票申请：用户可选择开具发票

### 4.3 数据统计流程

1. 展示记录：系统记录每次广告展示
2. 点击追踪：记录用户点击行为
3. 效果分析：计算点击率(CTR)和支出情况
4. 数据展示：通过仪表板展示统计数据

## 5. API接口

系统提供以下主要API接口：

### 5.1 广告接口

- GET /api/ads：获取活跃广告列表
- POST /api/ad/{id}/impression：记录广告展示
- POST /api/ad/{id}/click：记录广告点击
- GET /api/ad/{id}/stats：获取广告统计数据

## 6. 安全机制

### 6.1 用户认证

- 使用Flask-Login管理用户会话
- 密码加密存储
- 基于装饰器的访问控制

### 6.2 数据安全

- 防SQL注入：使用SQLAlchemy ORM
- CSRF保护：表单提交保护
- 权限验证：用户操作权限检查

## 7. 扩展性设计

系统设计考虑了以下扩展点：

- 支付方式扩展：支持添加新的支付渠道
- 广告类型扩展：可添加新的广告形式
- 统计维度扩展：可增加新的数据统计维度

## 8. 部署要求

### 8.1 环境要求

- Python 3.x
- MySQL 5.7+
- Web服务器（如Nginx）
- WSGI服务器（如Gunicorn）

### 8.2 配置说明

- 数据库连接配置
- 密钥配置
- 支付接口配置
- 日志配置
